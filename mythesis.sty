\ProvidesPackage{mythesis}[2011/09/11 Version 0.1]

%\usepackage[finnish]{babel}
\usepackage{babel}
% \usepackage[finnish]{polyglossia}
% \setdefaultlanguage{finnish}
\clubpenalty = 10000
\widowpenalty = 10000
\usepackage{xunicode}
\usepackage{fontspec}
\usepackage{url}%forXeTextobreaklongURLsatlineending
\usepackage{multicol}%erlaubtesmit\beginund\endTeilbereichemehrspaltigzusetzen
\usepackage{graphicx}%supportofJPG,PNGundPDF−Grafics
\usepackage{wrapfig}%umflosseneGrafikenimFließtext
\usepackage{verbatim}
\usepackage{picinpar}
\usepackage{titling}
\usepackage[german]{varioref}%betterreferences
%\usepackage[wide]{sidecap}%ermöglichtseitlicheBeschriftungvonAbbildungenundTabellen
\usepackage{ccaption}%AnpassungsmöglichkeitenfürAbbildungsbezeichnungen
%\usepackage{capt−of}
\usepackage[colorlinks,linkcolor=blue]{hyperref}%referecesaslinks/URLsinthePDF
\usepackage{listings}
\usepackage{tabularx}

%\setmainfont{Linux Libertine O}
\setromanfont{Linux Libertine O}%
\setsansfont{Linux Biolinum O}%
%\setmonofont[Scale=0.9]{Inconsolata}%

%% Vaakasuunnan mitat, ÄLÄ KOSKE!
\setlength{\hoffset}{-1in}
\setlength{\oddsidemargin}{35mm}
\setlength{\evensidemargin}{25mm}
\setlength{\textwidth}{15cm}
%% Pystysuunnan mitat, ÄLÄ KOSKE!
\setlength{\voffset}{-1in}
\setlength{\headsep}{7mm}
\setlength{\headheight}{1em}
\setlength{\topmargin}{25mm-\headheight-\headsep}
\setlength{\textheight}{23cm}


%\renewcommand*{\author}[1]{\newcommand*{\authorname}{#1}}% User command
\newcommand*{\place}[1]{\newcommand*{\theplace}{#1}}% User command

\renewcommand*{\title}[2]{% User command
 \newcommand*{\thetitle}{#1}%
 \newcommand*{\thetitle@en}{#2}}

\newcommand*{\thesisdegree}[2]{% User command
 \newcommand*{\thethesisdegree}{#1}%
 \newcommand*{\thethesisdegree@en}{#2}}

\newcommand*{\degreeprogram}[2]{% User command
 \newcommand*{\thedegreeprogram}{#1}%
 \newcommand*{\thedegreeprogram@en}{#2}}

\newcommand*{\department}[2]{% User command
 \newcommand*{\thedepartment}{#1}%
 \newcommand*{\thedepartment@en}{#2}}

\newcommand*{\keywords}[2]{% User command
 \newcommand*{\thekeywords}{#1}%
 \newcommand*{\thekeywords@en}{#2}}

\newcommand*{\supervisor}[2]{% User command
 \newcommand*{\thesupervisor}{#1}%
 \newcommand*{\thesupervisor@en}{#2}}

\newcommand*{\instructor}[2]{% User command
 \newcommand*{\theinstructor}{#1}%
 \newcommand*{\theinstructor@en}{#2}}

\newcommand*{\uni}[2]{% User command
 \newcommand*{\theuni}{#1}
 \newcommand*{\theuni@en}{#2}}

\newcommand*{\school}[2]{% User command
 \newcommand*{\theschool}{#1}
 \newcommand*{\theschool@en}{#2}}

\newcommand{\maketitlepage}{
\thispagestyle{empty}
\begin{titlepage}
\begin{center}
\textsc{\theuni n}
\textsc{\theschool}\\
\vspace{7cm}
%\Large\textsc{\thetitle}
\Large\textbf{\thetitle}
\vspace{4mm}\\
\normalsize\textsc{\thethesisdegree}\\
\vspace{28mm}
\begin{minipage}{0.4\textwidth}
\begin{flushleft} \large
\emph{Tekijä:}\\
 \textsc{\theauthor}
\end{flushleft}
\end{minipage}
\begin{minipage}{0.4\textwidth}
\begin{flushright} \large
\emph{Ohjaaja:} \\
 \textsc{\theinstructor}
\end{flushright}
\end{minipage}\\
%\vspace{85mm}
\vfill
\normalsize{\theplace\ \today}
%\large{kandidaatintyö}
\end{center}
\end{titlepage}
\clearpage
}

\newenvironment{abstractpage}{
 \thispagestyle{empty}%
 \enlargethispage{5mm}%
 \noindent
 \begin{minipage}{.5\linewidth}%
  \begin{flushleft}%
   \textsc{\theuni\\\theschool}
  \end{flushleft}%
 \end{minipage}
 \begin{minipage}{.49\linewidth}%
  \begin{flushright}%
   \textsc{\thethesisdegree n\\tiivistelmä}%
  \end{flushright}%
 \end{minipage}\vspace{3mm}\\
 \begin{tabular}{|p{\linewidth-13pt}|}
  \hline\vspace{-2mm}
    Tekijä: \theauthor\\\\
    Työn nimi: \thetitle\\\\
  \begin{minipage}{0.33\textwidth}
   \begin{flushleft}
    Päivämäärä: 11.9.2011
   \end{flushleft}
  \end{minipage}
  \begin{minipage}{0.33\textwidth}
   \begin{center}
    Kieli: suomi
   \end{center}
  \end{minipage}
  \begin{minipage}{0.3\textwidth}
   \begin{flushright}
    Sivumäärä: X+X
   \end{flushright}
  \end{minipage}
  \vspace{-3mm}\\\hline\vspace{-2mm}
    Tutkinto-ohjelma: \thedegreeprogram
  \vspace{1.35mm}\\\hline\vspace{-2mm}
    Vastuuopettaja: \thesupervisor\\\\
    Ohjaaja: \theinstructor
  \vspace{1.35mm}\\\hline
  %\hline\vspace{1mm}\noindent
  \vspace{-2mm}
  \noindent%
  }{%
\noindent%
  \vspace{129mm}
  \\\hline\vspace{-2mm}
    Avainsanat: \thekeywords
  \vspace{1.35mm}\\\hline
 \end{tabular}
 \clearpage
}
\newenvironment{abstractpage@en}{
 \thispagestyle{empty}%
 \enlargethispage{5mm}%
 \noindent
 \begin{minipage}{.5\linewidth}%
  \begin{flushleft}%
   \textsc{\theuni@en\\\theschool@en}
  \end{flushleft}%
 \end{minipage}
 \begin{minipage}{.49\linewidth}%
  \begin{flushright}%
   \textsc{Abstract of the\\\thethesisdegree@en}%
  \end{flushright}%
 \end{minipage}\vspace{3mm}\\
 \begin{tabular}{|p{\linewidth-13pt}|}
  \hline\vspace{-2mm}
    Author: \theauthor\\\\
    Title: \thetitle@en\\\\
  \begin{minipage}{0.33\textwidth}
   \begin{flushleft}
    Date: 11.9.2011
   \end{flushleft}
  \end{minipage}
  \begin{minipage}{0.33\textwidth}
   \begin{center}
    Language: Finnish
   \end{center}
  \end{minipage}
  \begin{minipage}{0.3\textwidth}
   \begin{flushright}
    Number of Pages: X+X
   \end{flushright}
  \end{minipage}
  \vspace{-3mm}\\\hline\vspace{-2mm}
    Degree programme: \thedegreeprogram@en
  \vspace{1.35mm}\\\hline\vspace{-2mm}
    Supervisor: \thesupervisor@en\\\\
    Instructor: \theinstructor@en
  \vspace{1.35mm}\\\hline
  %\hline\vspace{1mm}\noindent
  \vspace{-2mm}
  \noindent%
  }{%
\noindent%
  \vspace{129mm}
  \\\hline\vspace{-2mm}
    Keywords: \thekeywords@en
  \vspace{1.35mm}\\\hline
 \end{tabular}
 \clearpage
}
